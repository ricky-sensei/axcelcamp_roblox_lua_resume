この記事は、岩手県八幡平市のプログラミング教室「アクセルキャンプ」の公開教材です。
[アクセルキャンプ(フリースペースプラウド)のリンク](https://freespaceproud.com)
教材の作成依頼等も承っております。ご意見等は、リンク先の問い合わせ欄からお願いします。
教材の転用・利用等は自由ですが、コメント等で一声いただけますと幸いです。  

------------------------------------------------------------------------
# Roblox Lua 基礎③ if文(条件分岐)
条件によって違う動きをするように設計することを、｢**条件分岐**｣という。luaでの条件分岐の実装方法をマスターしよう。

------------------------------------------------------------------------

## 🎯 今日の目標

- 条件によって処理を分けられるようになる  
- if / elseif / else の書き方を覚える  
- ゲームでよくある「判定」を作れるようになる  

------------------------------------------------------------------------

# 1. if文 = ｢もし ~ なら｣
「もし〜だったら、これをする」という処理を書くための仕組み。

ゲームの中では、こんな場面で使われている。

- HPが0になったらゲームオーバー  
- スコアが100点以上ならクリア  
- カギを持っていたらドアが開く  

まず、これから出てくる英単語を、日本語に対応させてみよう。よくわからなくなったら、この表に戻ってきて確認しよう。
| lua | 読み方 | 日本語 |
|---|---|---|
| if | イフ | もし| 
| then | ゼン | なら |
| elseif | エルスイフ | そうじゃなくて(else) もし(if)|
| else | エルス | そうじゃないとき |
| end | エンド | おわり|
------------------------------------------------------------------------

# 2. if文の基本形
```lua
if 条件 then
    条件がtrueのときに実行される
end
```
------------------------------------------------------------------------

# 3. if / else

「そうじゃなかったら」を書くこともできる。

```lua
local hp = 50

if hp <= 0 then
    print("ゲームオーバー")
else
    print("まだ生きている")
end
```

---

# 4. if / elseif / else

条件がたくさんあるときは `elseif` を使う。

```lua
local score = 85

if score >= 100 then
    print("Sランク")
elseif score >= 80 then
    print("Aランク")
elseif score >= 60 then
    print("Bランク")
else
    print("Cランク")
end
```
------------------------------------------------------------------------
# 5. 比較演算子・論理演算子と一緒に使う

[第2章](https://qiita.com/ricky-sensei/items/8348d04a39db2f16d649)で学んだ内容を組み合わせると、  
ゲームらしい判定が作れる。

```lua
local hp = 30
local hasKey = true

if hp > 0 and hasKey then
    print("ドアが開いた")
else
    print("ドアは開かない")
end
```
------------------------------------------------------------------------
# 6. よくあるミス
別の言語のifと違う部分もあるので、気をつけよう

### ❌ then を忘れる

```lua
-- ダメな例
if hp <= 0
    print("ゲームオーバー")
end
```

### ❌ end を忘れる

if文は **必ず end で閉じる** 必要がある。

### ✅ 正しい書き方

```lua
if hp <= 0 then
    print("ゲームオーバー")
end
```

------------------------------------------------------------------------
# 7. 実験コード
まず、これを実行したらどうなるか予想してから実行してみよう

```lua
local hp = 40
local damage = 30

hp = hp - damage

if hp <= 0 then
    print("ゲームオーバー")
elseif hp < 50 then
    print("ピンチ！")
else
    print("まだ余裕")
end
```

<details><summary>答え</summary>

```
ピンチ！
```

</details>

------------------------------------------------------------------------
# 8. Roblox Studioでやってみよう

触れたらメッセージが変わるブロックを作ってみよう。

```lua
local part = script.Parent

local function onTouched(hit)
    local character = hit.Parent
    if not character then return end

    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end

    -- ここにコードを追加して以下の処理をできるようにしよう
    --  ･もしhumanoid.Health(HP) が0より以下だったら、｢ゲームオーバーです｣と表示 
    --  ･もしhumanoid.Health(HP) が50より小さかったら、｢HPがすくない!｣と表示 
    --  ･それ以外の場合は｢余裕だぜ｣と表示 
    ???
end

part.Touched:Connect(onTouched)
```
<details><summary>例</summary>

```lua
    if humanoid.Health <= 0 then
        print("ゲームオーバーです")
    elseif humanoid.Health < 50 then
        print("HPが少ない！")
    else
        print("余裕だぜ")
    end
```
</details>
------------------------------------------------------------------------

# 9. まとめ

- if文で条件によって処理を分けられる  
- true / false がとても大事  
- 比較演算子・論理演算子とセットで使う  
- ゲームの「判定」はほぼ if文  


------------------------------------------------------------------------

# 🎮 チャレンジ

1. HPが100以上なら「満タン」と表示しよう  
2. スコアによってランクを3段階で表示しよう  
3. HPが0以下のときだけダメージを受けないようにしてみよう  
